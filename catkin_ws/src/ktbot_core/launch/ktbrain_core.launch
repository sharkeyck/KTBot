<launch>
  <!-- Push into a namspace so mqtt is still valid even if brain and core are both run on the same host. -->

  <!-- Load example URDF -->
  <param name="robot_description" command="$(find xacro)/xacro.py '$(find ktbot_description)/urdf/ktbot.xacro'" />

  <group ns="ktbrain">
    <node name="mqtt_bridge" pkg="mqtt_bridge" type="mqtt_bridge_node.py" output="screen">
      <rosparam command="load" file="$(find ktbot_core)/config/ktbrain_bridge_params.yaml" />
    </node>

    <node name="slam_gmapping" pkg="gmapping" type="slam_gmapping">
      <remap from="scan" to="/ktbot/laser_scan"/>
      <param name="temporalUpdate" value="5.0"/>
    </node>

    <node name="rqt_robot_steering" pkg="rqt_robot_steering" type="rqt_robot_steering">
      <!--<param name="default_topic" value="/ktbot/wheel_diff_drive_controller/cmd_vel"/>-->
      <param name="default_topic" value="cmd_vel"/>
    </node>
  </group>
</launch>
